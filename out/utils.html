<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Crea un oggetto libro
 * @param {string} n - Nome del libro
 * @param {string} g - Genere del libro
 * @param {number} p - Prezzo del libro
 * @returns {Object} Oggetto libro
 */
export function aggiungiLibro(n, g, p) {
    return { nome: n, genere: g, prezzo: p };
}

/**
 * Crea un nuovo cliente
 * @param {string} nome - Nome del cliente
 * @param {number} punti - Punti fedeltà iniziali del cliente
 * @returns {Object} Oggetto cliente
 */
export function creaCliente(nome, punti) {
    return { 
        nome: nome, 
        username: generaUsername(nome), 
        puntiFedelta: punti, 
        libriAcquistati: []
    };
}

/**
 * Genera un username basato sul nome del cliente
 * @param {string} nome - Nome del cliente
 * @returns {string} Username generato
 */
export function generaUsername(nome) {
    return nome.replace(/ /g, "_").toLowerCase();
}

/**
 * Permette a un cliente di acquistare un libro applicando eventuali sconti
 * @param {Object} cliente - Cliente che acquista il libro
 * @param {string} titolo - Titolo del libro
 * @param {string} genere - Genere del libro
 * @param {number} prezzo - Prezzo del libro
 */
export function acquistaLibro(cliente, titolo, genere, prezzo) {
    let sconto = Math.floor(cliente.puntiFedelta / 10);
    let prezzoFinale = Math.max(prezzo - sconto, 0);
    
    if (cliente.puntiFedelta >= sconto * 10) {
        cliente.puntiFedelta -= sconto * 10;
        cliente.libriAcquistati.push(aggiungiLibro(titolo, genere, prezzoFinale));
    } else {
        console.log(`Errore: ${cliente.nome} non ha abbastanza punti fedeltà.`);
    }
}

/**
 * Mostra i dettagli di un cliente
 * @param {Object} cliente - Cliente di cui mostrare i dettagli
 */
export function mostraDettagli(cliente) {
    console.log(`Nome: ${cliente.nome}`);
    console.log(`Username: ${cliente.username}`);
    console.log(`Punti Fedeltà rimanenti: ${cliente.puntiFedelta}`);
    console.log("Libri Acquistati:");
    cliente.libriAcquistati.forEach(libro => {
        console.log(` - ${libro.nome} (${libro.genere}) - ${libro.prezzo}€`);
    });
    console.log("");
}

/**
 * Filtra i clienti che hanno acquistato libri di un certo genere
 * @param {Array&lt;Object>} clienti - Lista dei clienti
 * @param {string} genere - Genere da filtrare
 * @returns {Array&lt;Object>} Lista di clienti che hanno acquistato almeno un libro del genere indicato
 */
export function filtraPerGenere(clienti, genere) {
    return clienti.filter(cliente => 
        cliente.libriAcquistati.some(libro => libro.genere.toLowerCase() === genere.toLowerCase())
    );
}

/**
 * Calcola il totale speso in libri da tutti i clienti
 * @param {Array&lt;Object>} clienti - Lista dei clienti
 * @returns {number} Totale speso in libri
 */
export function totaleSpeso(clienti) {
    return clienti.reduce((totale, cliente) => 
        totale + cliente.libriAcquistati.reduce((somma, libro) => somma + libro.prezzo, 0)
    , 0);
}

/**
 * Trova il cliente che ha acquistato più libri
 * @param {Array&lt;Object>} clienti - Lista dei clienti
 * @returns {Object|null} Cliente con più libri acquistati o null se nessun cliente ha acquistato libri
 */
export function clienteConPiuLibri(clienti) {
    return clienti.reduce((topCliente, cliente) => 
        cliente.libriAcquistati.length > (topCliente?.libriAcquistati.length || 0) ? cliente : topCliente
    , null);
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#acquistaLibro">acquistaLibro</a></li><li><a href="global.html#aggiungiLibro">aggiungiLibro</a></li><li><a href="global.html#clienteConPiuLibri">clienteConPiuLibri</a></li><li><a href="global.html#creaCliente">creaCliente</a></li><li><a href="global.html#filtraPerGenere">filtraPerGenere</a></li><li><a href="global.html#generaUsername">generaUsername</a></li><li><a href="global.html#mostraDettagli">mostraDettagli</a></li><li><a href="global.html#totaleSpeso">totaleSpeso</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Apr 01 2025 18:14:19 GMT+0200 (Ora legale dell’Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
